# ä¸­ä¿¡é“¶è¡Œå›½å¯†API - éƒ¨ç½²è¯´æ˜æ–‡æ¡£

**æ›´æ–°æ—¶é—´ï¼š** 2026å¹´1æœˆ28æ—¥  
**ç‰ˆæœ¬ï¼š** v1.2.0  
**ä½œè€…ï¼š** qsswgl

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
3. [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
4. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
5. [APIä½¿ç”¨è¯´æ˜](#apiä½¿ç”¨è¯´æ˜)
6. [H5æµ‹è¯•å·¥å…·](#h5æµ‹è¯•å·¥å…·)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
8. [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)

---

## é¡¹ç›®æ¦‚è¿°

ä¸­ä¿¡é“¶è¡Œå›½å¯†APIæ˜¯ä¸€ä¸ªåŸºäº .NET 10.0 çš„ SM2/SM3/SM4 å›½å¯†ç®—æ³•æœåŠ¡ï¼Œæä¾›å®Œæ•´çš„åŠ å¯†ã€è§£å¯†ã€ç­¾åã€éªŒç­¾åŠŸèƒ½ï¼Œæ”¯æŒä¸­ä¿¡é“¶è¡Œæ”¯ä»˜æ¥å…¥åœºæ™¯ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **SM2 æ¤­åœ†æ›²çº¿åŠ å¯†ç®—æ³•**
  - å…¬é’¥åŠ å¯† / ç§é’¥è§£å¯†
  - ç§é’¥ç­¾å / å…¬é’¥éªŒç­¾
  - å¯†é’¥å¯¹ç”Ÿæˆ
  
- âœ… **SM3 å“ˆå¸Œç®—æ³•**
  - æ¶ˆæ¯æ‘˜è¦è®¡ç®—
  
- âœ… **SM4 åˆ†ç»„åŠ å¯†ç®—æ³•**
  - CBC æ¨¡å¼åŠ å¯† / è§£å¯†
  - å¯†é’¥ç”Ÿæˆ

---

## åŠŸèƒ½ç‰¹æ€§

### 1. å¤šæ ¼å¼å¯†é’¥æ”¯æŒ

**ç§é’¥æ ¼å¼ï¼š**
- âœ… PEM æ ¼å¼ï¼ˆæ ‡å‡†PKCS#8ï¼‰
- âœ… åŠ å¯† PKCS#8ï¼ˆéœ€è¦å¯†ç ï¼‰
- âœ… Base64 ç¼–ç ï¼ˆåŸå§‹32å­—èŠ‚Då€¼ï¼‰
- âœ… Hex å­—ç¬¦ä¸²ï¼ˆ64ä½ï¼Œæ”¯æŒå‰å¯¼é›¶ï¼‰

**å…¬é’¥æ ¼å¼ï¼š**
- âœ… X509 è¯ä¹¦ï¼ˆBase64ï¼‰
- âœ… Hex å­—ç¬¦ä¸²ï¼ˆå…¬é’¥ç‚¹åæ ‡ï¼‰

### 2. å­—æ®µåå…¼å®¹æ€§

æ”¯æŒå¤šç§å­—æ®µåï¼Œå…¼å®¹ä¸åŒå®¢æˆ·ç«¯ï¼š

| æ ‡å‡†å­—æ®µ | å…¼å®¹å­—æ®µ | è¯´æ˜ |
|---------|---------|------|
| `data` | `plaintext` | æ˜æ–‡æ•°æ® |
| `privateKey` | `privateKeyHex` | ç§é’¥ |
| `publicKey` | `publicKeyHex` | å…¬é’¥ |

### 3. å®Œæ•´çš„æµ‹è¯•å·¥å…·

- ğŸ“± **H5 å¯è§†åŒ–æµ‹è¯•é¡µé¢**ï¼šhttps://citic.qsgl.net/workflow-test.html
- ğŸ“– **Swagger API æ–‡æ¡£**ï¼šhttps://citic.qsgl.net/swagger
- ğŸ§ª **å®Œæ•´æµç¨‹æµ‹è¯•**ï¼šæ¨¡æ‹ŸçœŸå®æ”¯ä»˜åœºæ™¯

---

## æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Internet (HTTPS)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚   Traefik   â”‚  (åå‘ä»£ç† + è‡ªåŠ¨HTTPS)
        â”‚   v3.2.0    â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   traefik-net ç½‘ç»œ      â”‚
        â”‚  (Docker å†…éƒ¨ç½‘ç»œ)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚ citic-gm-apiâ”‚  (æ— å®¿ä¸»æœºç«¯å£æ˜ å°„)
        â”‚ Container   â”‚
        â”‚ Port: 8080  â”‚  (ä»…å†…éƒ¨è®¿é—®)
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

- **è¿è¡Œæ—¶ï¼š** .NET 10.0
- **åŠ å¯†åº“ï¼š** BouncyCastle.Cryptography 2.5.0
- **å®¹å™¨åŒ–ï¼š** Docker + Docker Compose
- **åå‘ä»£ç†ï¼š** Traefik v3.2
- **æ“ä½œç³»ç»Ÿï¼š** Ubuntu 24.04 (æœåŠ¡å™¨) + Linux x64 (å®¹å™¨)
- **åŸŸåï¼š** citic.qsgl.net (Let's Encrypt HTTPS)

---

## éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- **æœåŠ¡å™¨ï¼š** Ubuntu 24.04 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Dockerï¼š** 20.10+ 
- **Docker Composeï¼š** 2.0+
- **.NET SDKï¼š** 10.0+ (ä»…å¼€å‘ç¯å¢ƒ)

### å®Œæ•´éƒ¨ç½²æµç¨‹

#### 1. æœ¬åœ°ç¼–è¯‘æ‰“åŒ…

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd K:\payment\citic\.Net\CiticGmApi

# æ¸…ç†åµŒå¥—ç›®å½•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
if (Test-Path publish\publish) { Remove-Item -Recurse -Force publish\publish }

# å‘å¸ƒè‡ªåŒ…å«åº”ç”¨
dotnet publish -c Release -o ./publish --self-contained true -r linux-x64

# æ‰“åŒ…
cd publish
tar -czf ..\update.tar.gz *
cd ..
```

#### 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨

```powershell
# ä½¿ç”¨ SSH å¯†é’¥ä¸Šä¼ 
scp -i K:\Key\tx.qsgl.net_id_ed25519 update.tar.gz root@tx.qsgl.net:/tmp/
```

#### 3. æœåŠ¡å™¨éƒ¨ç½²

```bash
# SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh -i K:\Key\tx.qsgl.net_id_ed25519 root@tx.qsgl.net

# åœæ­¢æ—§å®¹å™¨
cd /opt/citic-gm-api
docker-compose down

# æ¸…ç†æ—§æ–‡ä»¶å¹¶è§£å‹æ–°ç‰ˆæœ¬
rm -rf *
tar -xzf /tmp/update.tar.gz

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x CiticGmApi

# å¯åŠ¨å®¹å™¨ï¼ˆè‡ªåŠ¨æ„å»ºï¼‰
docker-compose up --build -d

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤å¯åŠ¨æˆåŠŸ
docker logs citic-gm-api --tail 20
```

#### 4. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps | grep citic-gm-api

# æµ‹è¯• API
curl https://citic.qsgl.net/api/Crypto/sm4/generate-key

# è®¿é—® Swagger æ–‡æ¡£
# æµè§ˆå™¨æ‰“å¼€: https://citic.qsgl.net/swagger
```

### Docker Compose é…ç½®

```yaml
version: '3.8'

services:
  citic-gm-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: citic-gm-api
    restart: unless-stopped
    networks:
      - traefik-net
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.citic.rule=Host(`citic.qsgl.net`)"
      - "traefik.http.routers.citic.entrypoints=websecure"
      - "traefik.http.routers.citic.tls=true"
      - "traefik.http.routers.citic.tls.certresolver=myresolver"
      - "traefik.http.services.citic.loadbalancer.server.port=8080"

networks:
  traefik-net:
    external: true
```

### Dockerfile

```dockerfile
FROM ubuntu:24.04

WORKDIR /app

RUN apt-get update && \
    apt-get install -y ca-certificates curl libicu74 && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

RUN ln -snf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime && \
    echo Asia/Shanghai > /etc/timezone

COPY . .

RUN chmod +x ./CiticGmApi

EXPOSE 8080

CMD ["./CiticGmApi"]
```

---

## APIä½¿ç”¨è¯´æ˜

### åŸºç¡€ä¿¡æ¯

- **Base URL:** `https://citic.qsgl.net/api/Crypto`
- **Content-Type:** `application/json`
- **å“åº”æ ¼å¼:** JSON

### ç»Ÿä¸€å“åº”ç»“æ„

```json
{
  "success": true/false,
  "message": "æ“ä½œç»“æœæè¿°",
  "data": { /* å…·ä½“æ•°æ® */ }
}
```

### API ç«¯ç‚¹åˆ—è¡¨

#### 1. SM2 å¯†é’¥å¯¹ç”Ÿæˆ

**GET** `/sm2/keypair`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "å¯†é’¥å¯¹ç”ŸæˆæˆåŠŸ",
  "data": {
    "privateKeyHex": "00c70a3e599743ac51aa7bb49942806ac4346c51cc653180cceb6c1673a2332c3e",
    "publicKeyHex": "040c4fa0d5e9b206f1fd5de6b86edea8e0588e6c3e12fc7b597d7c05cc9d6ac3e0f9..."
  }
}
```

#### 2. SM2 åŠ å¯†

**POST** `/sm2/encrypt`

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```json
{
  "plaintext": "Hello World",
  "publicKey": "040c4fa0d5e9b206f1fd5de6b86edea8e0588e6c3e12fc7b...",
  "isBase64Input": false
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "åŠ å¯†æˆåŠŸ",
  "data": {
    "ciphertext": "BGEvjmmwe7QggRqSwOUv6QbUAvuiWE2tXEkqN5ZD5ozz..."
  }
}
```

#### 3. SM2 è§£å¯† â­ æ”¯æŒåŠ å¯†ç§é’¥

**POST** `/sm2/decrypt`

**è¯·æ±‚ç¤ºä¾‹ï¼ˆæ”¯æŒå¤šç§æ ¼å¼ï¼‰ï¼š**

```json
// æ–¹å¼1: Hex ç§é’¥
{
  "ciphertext": "BGEvjmmwe7QggRqSwOUv...",
  "privateKey": "00c70a3e599743ac51aa7bb49942806ac4346c51cc653180cceb6c1673a2332c3e"
}

// æ–¹å¼2: Base64 ç§é’¥
{
  "ciphertext": "BGEvjmmwe7QggRqSwOUv...",
  "privateKey": "A1NNMt82STbFA2rh0e+9nHbZIvVCMahzGap8z3dEi7B8..."
}

// æ–¹å¼3: åŠ å¯†çš„ PKCS#8 ç§é’¥ï¼ˆéœ€è¦å¯†ç ï¼‰
{
  "ciphertext": "BGEvjmmwe7QggRqSwOUv...",
  "privateKey": "A1NNMpQQjXXhphyIXEc0h7T2aY...",
  "password": "A1SttKLQG3bIh5Bk"
}

// æ–¹å¼4: PEM æ ¼å¼
{
  "ciphertext": "BGEvjmmwe7QggRqSwOUv...",
  "privateKey": "-----BEGIN PRIVATE KEY-----\nMIGH..."
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "è§£å¯†æˆåŠŸ",
  "data": {
    "plaintext": "Hello World"
  }
}
```

#### 4. SM2 ç­¾å

**POST** `/sm2/sign`

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```json
{
  "plaintext": "è¦ç­¾åçš„æ•°æ®",
  "privateKey": "00c70a3e599743ac51aa7bb49942806ac4...",
  "userId": "1234567812345678"  // å¯é€‰ï¼Œé»˜è®¤ "1234567812345678"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "ç­¾åæˆåŠŸ",
  "data": {
    "signature": "MEUCIQDxK8..."
  }
}
```

#### 5. SM2 éªŒç­¾

**POST** `/sm2/verify`

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```json
{
  "plaintext": "è¦éªŒè¯çš„æ•°æ®",
  "signature": "MEUCIQDxK8...",
  "publicKey": "040c4fa0d5e9b206f1fd5de6b86edea8e0588e6c3e12fc7b...",
  "userId": "1234567812345678"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "éªŒç­¾æˆåŠŸ",
  "data": {
    "isValid": true
  }
}
```

#### 6. SM4 å¯†é’¥ç”Ÿæˆ

**GET** `/sm4/generate-key`

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "SM4å¯†é’¥ç”ŸæˆæˆåŠŸ",
  "data": {
    "key": "7D5A9C1E4F32B10A86E9D2C5B301F4A2"
  }
}
```

#### 7. SM4 åŠ å¯†

**POST** `/sm4/encrypt`

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```json
{
  "plaintext": "Hello SM4",
  "key": "7D5A9C1E4F32B10A86E9D2C5B301F4A2",  // 32ä½ Hex
  "iv": "30303030303030303030303030303030"    // 32ä½ Hexï¼Œå¯é€‰
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "åŠ å¯†æˆåŠŸ",
  "data": {
    "ciphertext": "pJCu5mfA1/OTZF0xVfvXbiIAOe4eh+va..."
  }
}
```

#### 8. SM4 è§£å¯†

**POST** `/sm4/decrypt`

**è¯·æ±‚ç¤ºä¾‹ï¼š**
```json
{
  "ciphertext": "pJCu5mfA1/OTZF0xVfvXbiIAOe4eh+va...",
  "key": "7D5A9C1E4F32B10A86E9D2C5B301F4A2",
  "iv": "30303030303030303030303030303030"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "è§£å¯†æˆåŠŸ",
  "data": {
    "plaintext": "Hello SM4"
  }
}
```

---

## H5æµ‹è¯•å·¥å…·

### è®¿é—®åœ°å€

ğŸ”— **ä¸»é¡µï¼š** https://citic.qsgl.net/workflow-test.html  
ğŸ”— **Swaggerï¼š** https://citic.qsgl.net/swagger

### åŠŸèƒ½ç‰¹æ€§

#### 1ï¸âƒ£ å®Œæ•´æµç¨‹æµ‹è¯•

æ¨¡æ‹Ÿä¸­ä¿¡é“¶è¡Œæ”¯ä»˜å®Œæ•´åŠ å¯†æµç¨‹ï¼š

1. **ç”Ÿæˆ SM4 å¯†é’¥** - éšæœºç”Ÿæˆ16å­—èŠ‚å¯¹ç§°å¯†é’¥
2. **å‡†å¤‡ä¸šåŠ¡å‚æ•°** - é…ç½®è®¢å•ä¿¡æ¯ï¼ˆå•†æˆ·å·ã€é‡‘é¢ç­‰ï¼‰
3. **SM4 åŠ å¯†ä¸šåŠ¡æŠ¥æ–‡** - ä½¿ç”¨ SM4 åŠ å¯† JSON æ•°æ®
4. **SM2 åŠ å¯† SM4 å¯†é’¥** - ä½¿ç”¨ä¸­ä¿¡å…¬é’¥åŠ å¯†å¯¹ç§°å¯†é’¥
5. **SM2 ç­¾ååŸæ–‡** - ä½¿ç”¨å•†æˆ·ç§é’¥ç­¾ååŸå§‹æŠ¥æ–‡
6. **ç»„è£…è¯·æ±‚** - ç”Ÿæˆå®Œæ•´çš„ HTTP è¯·æ±‚æ ¼å¼

#### 2ï¸âƒ£ å¯†é’¥é…ç½®ç®¡ç†

- ğŸ’¾ æœ¬åœ°å­˜å‚¨æ”¯æŒï¼ˆæµè§ˆå™¨ localStorageï¼‰
- ğŸ” æ”¯æŒä¸­ä¿¡å…¬é’¥ã€å•†æˆ·ç§é’¥ã€ç§é’¥å¯†ç 
- ğŸ”§ ä¸€é”®åŠ è½½é»˜è®¤æµ‹è¯•å¯†é’¥
- ğŸ—‘ï¸ å®‰å…¨æ¸…é™¤å¯†é’¥æ•°æ®

#### 3ï¸âƒ£ å•æ­¥æµ‹è¯•è°ƒè¯•

6ä¸ªç‹¬ç«‹æµ‹è¯•æ¨¡å—ï¼š
- SM2 åŠ å¯† / è§£å¯†
- SM2 ç­¾å / éªŒç­¾
- SM4 åŠ å¯† / è§£å¯†
- å¯†é’¥å¯¹ç”Ÿæˆ

æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥ç‹¬ç«‹æ‰§è¡Œå’ŒéªŒè¯ã€‚

#### 4ï¸âƒ£ API æ–‡æ¡£æŸ¥çœ‹

- å®Œæ•´çš„æ¥å£åˆ—è¡¨
- å‚æ•°è¯´æ˜
- ä½¿ç”¨ç¤ºä¾‹
- å¿«é€Ÿé“¾æ¥åˆ° Swagger

### ä½¿ç”¨æŒ‡å—

**å¿«é€Ÿå¼€å§‹ï¼š**

1. è®¿é—® https://citic.qsgl.net/workflow-test.html
2. ç‚¹å‡»ã€å¯†é’¥é…ç½®ã€‘æ ‡ç­¾é¡µ
3. ç‚¹å‡»ã€åŠ è½½é»˜è®¤æµ‹è¯•å¯†é’¥ã€‘
4. è¿”å›ã€å®Œæ•´æµç¨‹æµ‹è¯•ã€‘æ ‡ç­¾é¡µ
5. ç‚¹å‡»ã€è¿è¡Œå®Œæ•´æµç¨‹æµ‹è¯•ã€‘

**è‡ªå®šä¹‰æµ‹è¯•ï¼š**

ä¿®æ”¹ä¸šåŠ¡å‚æ•°ï¼š
```json
{
  "mchId": "731691000000096",
  "appid": "wx3f64e658810cca0f",
  "body": "æµ‹è¯•å•†å“",
  "totalFee": 1,
  "outTradeNo": "ORDER1738058400123"
}
```

---

## å¸¸è§é—®é¢˜

### Q1: SM2 è§£å¯†å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**
1. âœ… å¯†é’¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆHex/Base64/PEMï¼‰
2. âœ… å¦‚æœæ˜¯åŠ å¯†ç§é’¥ï¼Œæ˜¯å¦æä¾›äº†å¯†ç 
3. âœ… å¯†æ–‡æ˜¯å¦ç”¨å¯¹åº”çš„å…¬é’¥åŠ å¯†
4. âœ… å¯†æ–‡æ ¼å¼æ˜¯å¦ä¸º Base64

**æµ‹è¯•æ–¹æ³•ï¼š**
```powershell
# ä½¿ç”¨ API è‡ªå·±ç”Ÿæˆçš„å¯†é’¥å¯¹æµ‹è¯•
# 1. ç”Ÿæˆå¯†é’¥å¯¹
$keypair = Invoke-RestMethod -Uri "https://citic.qsgl.net/api/Crypto/sm2/keypair"

# 2. åŠ å¯†
$encrypt = @{
    plaintext = "test"
    publicKey = $keypair.data.publicKeyHex
} | ConvertTo-Json
$result = Invoke-RestMethod -Uri "https://citic.qsgl.net/api/Crypto/sm2/encrypt" -Method Post -Body $encrypt -ContentType "application/json"

# 3. è§£å¯†
$decrypt = @{
    ciphertext = $result.data.ciphertext
    privateKey = $keypair.data.privateKeyHex
} | ConvertTo-Json
Invoke-RestMethod -Uri "https://citic.qsgl.net/api/Crypto/sm2/decrypt" -Method Post -Body $decrypt -ContentType "application/json"
```

### Q2: Hex ç§é’¥æœ‰å‰å¯¼é›¶æ€ä¹ˆåŠï¼Ÿ

âœ… **å·²æ”¯æŒï¼** API ä¼šè‡ªåŠ¨å¤„ç†å‰å¯¼é›¶å’Œ `0x` å‰ç¼€ã€‚

ç¤ºä¾‹ï¼š
- `00c70a3e599743ac...` âœ… æ­£å¸¸
- `0xc70a3e599743ac...` âœ… æ­£å¸¸  
- `c70a3e599743ac...` âœ… æ­£å¸¸

### Q3: å¦‚ä½•ä½¿ç”¨åŠ å¯†çš„ç§é’¥ï¼Ÿ

**æ–¹æ³•1ï¼šæä¾›å¯†ç å‚æ•°**
```json
{
  "ciphertext": "...",
  "privateKey": "A1NNMpQQjXXh...",
  "password": "A1SttKLQG3bIh5Bk"
}
```

**æ–¹æ³•2ï¼šå…ˆè§£å¯†ç§é’¥ï¼ˆä½¿ç”¨ä¸“ç”¨å·¥å…·ï¼‰**

âš ï¸ **æ³¨æ„ï¼š** Swift ä»£ç ä¸­çš„åŠ å¯†ç§é’¥ä¸æ˜¯æ ‡å‡† PKCS#8 æ ¼å¼ï¼Œéœ€è¦ä½¿ç”¨é…å¥—çš„è§£å¯†å·¥å…·ã€‚

### Q4: SM4 IV å‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ

SM4 çš„ IVï¼ˆåˆå§‹åŒ–å‘é‡ï¼‰æ˜¯ 16 å­—èŠ‚ï¼ˆ32ä½ Hexï¼‰ã€‚

**å¸¸ç”¨è®¾ç½®ï¼š**
- æµ‹è¯•ç¯å¢ƒï¼š`30303030303030303030303030303030` (16ä¸ª'0'çš„ASCIIç )
- ç”Ÿäº§ç¯å¢ƒï¼šå»ºè®®ä½¿ç”¨éšæœºç”Ÿæˆçš„16å­—èŠ‚

### Q5: å®¹å™¨å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ­¥éª¤ï¼š**

```bash
# 1. æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs citic-gm-api

# 2. æ£€æŸ¥ç«¯å£å ç”¨
docker ps | grep 8080

# 3. æ£€æŸ¥ç½‘ç»œ
docker network inspect traefik-net

# 4. é‡å¯å®¹å™¨
cd /opt/citic-gm-api
docker-compose down
docker-compose up -d
```

### Q6: å¦‚ä½•æŸ¥çœ‹ Traefik è·¯ç”±çŠ¶æ€ï¼Ÿ

```bash
# æŸ¥çœ‹ Traefik æ—¥å¿—
docker logs traefik

# è®¿é—® Traefik Dashboardï¼ˆå¦‚æœå¯ç”¨ï¼‰
# http://æœåŠ¡å™¨IP:8080
```

---

## æ›´æ–°æ—¥å¿—

### v1.2.0 (2026-01-28)

**æ–°å¢åŠŸèƒ½ï¼š**
- âœ… SM2 è§£å¯†æ”¯æŒåŠ å¯†çš„ PKCS#8 ç§é’¥ï¼ˆéœ€è¦å¯†ç ï¼‰
- âœ… å¢å¼º Hex ç§é’¥è§£æï¼ˆæ”¯æŒå‰å¯¼é›¶ã€0xå‰ç¼€ï¼‰
- âœ… æ–°å¢ `Password` å­—æ®µåˆ° `Sm2DecryptRequest` æ¨¡å‹
- âœ… å®Œæ•´æµç¨‹ H5 æµ‹è¯•å·¥å…·ï¼ˆworkflow-test.htmlï¼‰

**ä¼˜åŒ–æ”¹è¿›ï¼š**
- ğŸ”§ æ”¹è¿›ç§é’¥æ ¼å¼è‡ªåŠ¨æ£€æµ‹ï¼ˆPEM â†’ PKCS#8 â†’ Base64 â†’ Hexï¼‰
- ğŸ”§ æ›´å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
- ğŸ“– å®Œå–„ Swagger æ–‡æ¡£

**Bug ä¿®å¤ï¼š**
- ğŸ› ä¿®å¤ Hex ç§é’¥é•¿åº¦ä¸æ ‡å‡†å¯¼è‡´çš„è§£æå¤±è´¥
- ğŸ› ä¿®å¤å­—æ®µåå…¼å®¹æ€§é—®é¢˜ï¼ˆplaintext/dataï¼‰

### v1.1.0 (2026-01-21)

**æ–°å¢åŠŸèƒ½ï¼š**
- âœ… å¤šå­—æ®µåæ”¯æŒï¼ˆplaintext/dataã€privateKey/privateKeyHexï¼‰
- âœ… å¤šæ ¼å¼å¯†é’¥æ”¯æŒï¼ˆPEM/Base64/Hexï¼‰
- âœ… Traefik è‡ªåŠ¨ HTTPS é…ç½®

**éƒ¨ç½²ä¼˜åŒ–ï¼š**
- ğŸš€ å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆDocker + Docker Composeï¼‰
- ğŸŒ Traefik åå‘ä»£ç†é›†æˆ
- ğŸ“ å®Œæ•´éƒ¨ç½²æ–‡æ¡£

### v1.0.0 (2026-01-15)

**åˆå§‹ç‰ˆæœ¬ï¼š**
- âœ… SM2/SM3/SM4 åŸºç¡€åŠŸèƒ½
- âœ… RESTful API æ¥å£
- âœ… Swagger æ–‡æ¡£
- âœ… åŸºç¡€æµ‹è¯•é¡µé¢

---

## æŠ€æœ¯æ”¯æŒ

**é¡¹ç›®åœ°å€ï¼š** https://github.com/qsswgl/CiticGmApi  
**é—®é¢˜åé¦ˆï¼š** GitHub Issues  
**ä½œè€…ï¼š** qsswgl

---

## è®¸å¯è¯

MIT License

---

**æ–‡æ¡£ç»“æŸ**
